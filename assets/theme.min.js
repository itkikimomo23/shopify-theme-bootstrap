(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/

// Bootstrap tooltips
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));

tooltipTriggerList.map(function(tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
});
},{}],2:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/

// Handle filtering
const filteringSelectEl = document.getElementById('collection-filtering-select');

if (filteringSelectEl) {
    filteringSelectEl.addEventListener('change', (event) => {
        if ('URLSearchParams' in window) {
            let searchParams = new URLSearchParams(window.location.search);
            if (searchParams.toString()) {
                window.location = event.target.value + '?' + searchParams.toString();
            } else {
                window.location = event.target.value;
            }
        }
    });
}

// Handle sorting
const sortingSelectEl = document.getElementById('collection-sorting-select');

if (sortingSelectEl) {
    sortingSelectEl.addEventListener('change', (event) => {
        if ('URLSearchParams' in window) {
            let searchParams = new URLSearchParams(window.location.search);
            searchParams.set('sort_by', event.target.value);
            window.location.search = searchParams.toString();
        }
    });
}

// Handle layout
const layoutBtnEl = document.getElementById('collection-layout-btn');

if (layoutBtnEl) {
    layoutBtnEl.addEventListener('click', (event) => {
        if ('URLSearchParams' in window) {
            let searchParams = new URLSearchParams(window.location.search);
            searchParams.set('type', event.currentTarget.dataset.value);
            window.location.search = searchParams.toString();
        }
    });
}

},{}],3:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/
const el = document.querySelector('.google-map');

if (el) {
    var script = document.createElement('script');
    script.src = `https://maps.googleapis.com/maps/api/js?key=${el.dataset.apiKey}&callback=initMap`;
    script.async = true;

    window.initMap = function() {      
        const elArray = document.querySelectorAll('.google-map');

        elArray.forEach(el => {
            const latLng = { 
                lat: Number(el.dataset.lat), 
                lng: Number(el.dataset.lng) 
            };

            const map = new google.maps.Map(el, {
                center: latLng,
                zoom: Number(el.dataset.zoom),
            });

            const marker = new google.maps.Marker({
                position: latLng,
                map
            });

            marker.addListener('click', () => {
                el.closest('.google-map-wrapper')
                    .querySelector('.google-map-content')
                    .classList.remove('hide');
            });
        });
    };

    document.head.appendChild(script);
}

// Handle close button
document.querySelectorAll('.google-map-btn-close').forEach(el => 
    el.addEventListener('click', (e) => {
        e.target.closest('.google-map-content')
            .classList.add('hide');
    })
);


// Listen for changes in Shopify Theme Editor
document.addEventListener('shopify:section:load', function (event) {
    if (document.getElementById(event.target.id).querySelector('.google-map')) {
        initMap();
    }
});
},{}],4:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/

// Handle sticky-top
var stickyNavbar = function () { 
    if (document.getElementById('navbar').classList.contains('navbar-sticky')) {
        document.getElementById('shopify-section-navbar')
            .classList.add('sticky-top');
    }
};

stickyNavbar();

// Listen for changes in Shopify Theme Editor
document.addEventListener('shopify:section:load', function (event) {    
    if (event.detail.sectionId === 'navbar') {
        stickyNavbar();
    }
});

},{}],5:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/

// Scroll to newsletter form after submit
if (window.location.href.indexOf('?customer_posted=true') > -1) {
    setTimeout(function() { 
        document.querySelector('.newsletter').scrollIntoView();
    }, 750);
}
},{}],6:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/

// Define elements
const carousel = document.getElementById('product-carousel');

// Handle product gallery active class (carousel)
if (carousel) {    
    carousel.addEventListener('slide.bs.carousel', event => {
        Array.from(carousel.getElementsByClassName('product-carousel-thumbnails-item')).forEach(function(el, index) {
            if (index == event.to) {
                el.classList.add('active');
                el.getElementsByTagName('img')[0]
                    .classList.add('border', 'border-secondary');
            } else {
                el.classList.remove('active');
                el.getElementsByTagName('img')[0]
                    .classList.remove('border', 'border-secondary');
            }
        });
    });
}
     
// Handle product gallery full-screen click
if (carousel) {
    carousel.querySelectorAll('.carousel-item a').forEach(item => {
        item.addEventListener('click', event => {
            event.preventDefault();
            if (document.fullscreenEnabled) {
                carousel.requestFullscreen();
            }
        });
    });
}

// Close full-screen with close button
const closeFullScreenBtn = document.getElementById('close-full-screen-btn');

if (closeFullScreenBtn) {
    closeFullScreenBtn.addEventListener('click', () => {
        document.exitFullscreen();
    });
}

// Adjust product gallery based on 'fullscreenchange' event
document.addEventListener('fullscreenchange', () => {
    if (document.fullscreenElement) {
        carousel.classList
            .add('full-screen');

        carousel.querySelectorAll('.carousel-item')
            .forEach(item => {
                const img = item.getElementsByTagName('img')[0];
                const newImgSrc = item.getElementsByTagName('a')[0].href;
                img.src = newImgSrc;
            });

    } else {
        carousel.classList.remove('full-screen');

        carousel.querySelectorAll('.carousel-item')
            .forEach(item => {
                const img = item.getElementsByTagName('img')[0];
                img.src = img.dataset.src;
            });
    }
});

// Handle pinch zoom
// https://github.com/GoogleChromeLabs/pinch-zoom


// Stop videos on slide change
if (carousel) {    
    carousel.addEventListener('slid.bs.carousel', event => {
        Array.from(carousel.getElementsByClassName('carousel-item'))
            .forEach(function(el, index) {

                if (index == event.from) {
                    let iframe = el.querySelector('iframe');
                    let video = el.querySelector('video');
                    
                    if (iframe) {
                        let iframeSrc = iframe.src;
                        iframe.src = iframeSrc;
                    }
                    if (video) {
                        video.pause();
                    }
                }

            });
    });
}
},{}],7:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com
*/

// Autofocus search input field on dropdown open
document.getElementById('search-dropdown')
    .addEventListener('shown.bs.dropdown', function () {
        document.getElementById('minisearch-input').focus();
    });

},{}],8:[function(require,module,exports){
/* 
    © 2021 KondaSoft
    https://www.kondasoft.com

    IMPORTANT: We recommend that you do not edit this file,
    as you might lose changes when you upgrade our theme.
    Instead, you may add your own custom styles in the 
    "assets/custom.js" file.
*/

// Base scripts
require('./base');

// Theme scripts
require('./collection');
require('./map');
require('./navbar');
require('./newsletter');
require('./product');
require('./search');

},{"./base":1,"./collection":2,"./map":3,"./navbar":4,"./newsletter":5,"./product":6,"./search":7}]},{},[8]);
